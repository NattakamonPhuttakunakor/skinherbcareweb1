import mongoose from 'mongoose';
import dotenv from 'dotenv';
import Herb from './src/models/Herb.js';

dotenv.config();

const addHerbs = async () => {
  try {
    console.log("üîå Connecting to MongoDB...");
    await mongoose.connect(process.env.MONGO_URI);
    console.log("‚úÖ Connected to MongoDB");

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ User ‡∏´‡∏£‡∏∑‡∏≠ Admin ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô
    const users = await mongoose.connection.collection('users').findOne();
    let adminId;

    if (users) {
      // ‡πÉ‡∏ä‡πâ user ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
      const firstUser = await mongoose.connection.collection('users').findOne();
      adminId = firstUser._id;
      console.log(`Using existing user: ${adminId}`);
    } else {
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á ObjectId dummy
      adminId = new mongoose.Types.ObjectId();
      console.log(`Using dummy admin ID: ${adminId}`);
    }

    const herbsData = [
      {
        name: "‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ",
        scientificName: "Aloe barbadensis",
        description: "‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ‡∏°‡∏µ‡πÄ‡∏à‡∏•‡πÉ‡∏™‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏≤‡∏£‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö ‡πÅ‡∏•‡∏∞‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏ú‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",
        properties: ["‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö", "‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß", "‡∏•‡∏î‡∏£‡∏≠‡∏¢‡πÅ‡∏î‡∏á"],
        usage: "‡∏ó‡∏≤‡πÄ‡∏à‡∏•‡∏ß‡πà‡∏≤‡∏ô‡∏´‡∏≤‡∏á‡∏à‡∏£‡∏∞‡πÄ‡∏Ç‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏µ‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á",
        image: "/uploads/herbs/aloe.jpg",
        addedBy: adminId
      },
      {
        name: "‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô",
        scientificName: "Curcuma longa",
        description: "‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ä‡∏±‡∏ô‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏Ñ‡∏π‡∏£‡πå‡∏Ñ‡∏π‡∏°‡∏¥‡∏ô‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏§‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢ ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏™‡∏¥‡∏ß",
        properties: ["‡∏ï‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡∏Ñ‡∏ó‡∏µ‡πÄ‡∏£‡∏µ‡∏¢", "‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö", "‡∏•‡∏î‡∏™‡∏¥‡∏ß"],
        usage: "‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏´‡∏≤‡∏î ‡∏ó‡∏≤‡∏£‡∏≠‡∏ö 2-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
        image: "/uploads/herbs/turmeric.jpg",
        addedBy: adminId
      },
      {
        name: "‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å",
        scientificName: "Centella asiatica",
        description: "‡πÉ‡∏ö‡∏ö‡∏±‡∏ß‡∏ö‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏ô ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏ú‡∏¥‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",
        properties: ["‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö", "‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏ô", "‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß"],
        usage: "‡∏Ç‡πâ‡∏°‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏î‡∏∑‡πà‡∏°‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≤‡πÅ‡∏ö‡∏ö‡∏™‡∏î‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß",
        image: "/uploads/herbs/centella.jpg",
        addedBy: adminId
      },
      {
        name: "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",
        scientificName: "Cocos nucifera",
        description: "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡∏°‡∏µ‡∏§‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏´‡πâ‡∏á ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠",
        properties: ["‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏´‡πâ‡∏á", "‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß", "‡∏ï‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡∏∑‡πâ‡∏≠"],
        usage: "‡∏ó‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß‡∏Å‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≤‡∏ö‡∏ô‡πâ‡∏≥",
        image: "/uploads/herbs/coconut.jpg",
        addedBy: adminId
      },
      {
        name: "‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å",
        scientificName: "Tamarindus indica",
        description: "‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏°‡∏µ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô C ‡∏™‡∏π‡∏á ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏¥‡∏ß‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏™ ‡∏•‡∏î‡∏£‡∏≠‡∏¢‡∏î‡∏≥‡∏à‡∏≤‡∏Å‡πÅ‡∏î‡∏î",
        properties: ["‡∏•‡∏î‡∏£‡∏≠‡∏¢‡∏î‡∏≥", "‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏™", "‡∏•‡∏î‡∏ï‡∏≥‡∏´‡∏ô‡∏¥"],
        usage: "‡∏Ç‡πâ‡∏°‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡πÑ‡∏Ç‡πà ‡∏°‡∏≤‡∏™‡∏Å‡πå‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
        image: "/uploads/herbs/tamarind.jpg",
        addedBy: adminId
      },
      {
        name: "‡∏û‡∏ç‡∏≤‡∏¢‡∏≠",
        scientificName: "Curcuma domestica",
        description: "‡∏û‡∏ç‡∏≤‡∏¢‡∏≠‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö ‡∏•‡∏î‡∏Ç‡∏ô‡∏î‡∏≥ ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß",
        properties: ["‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö", "‡∏•‡∏î‡∏Ç‡∏ô‡∏î‡∏≥", "‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß"],
        usage: "‡∏ú‡∏™‡∏°‡∏û‡∏ç‡∏≤‡∏¢‡∏≠‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥ ‡∏ó‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏™‡∏Å‡πå‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
        image: "/uploads/herbs/galangal.jpg",
        addedBy: adminId
      },
      {
        name: "‡∏°‡∏∞‡∏ô‡∏≤‡∏ß",
        scientificName: "Citrus aurantifolia",
        description: "‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡∏°‡∏µ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô C ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏£‡πÅ‡∏≠‡∏ô‡∏ï‡∏¥‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÅ‡∏î‡∏ô‡∏ó‡πå ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏¥‡∏ß‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏™ ‡∏•‡∏î‡∏™‡∏¥‡∏ß",
        properties: ["‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏™", "‡∏•‡∏î‡∏™‡∏¥‡∏ß", "‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏î"],
        usage: "‡∏™‡∏Å‡∏±‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏ó‡∏≤‡πÄ‡∏ö‡∏≤ ‡πÜ ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå",
        image: "/uploads/herbs/lime.jpg",
        addedBy: adminId
      },
      {
        name: "‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤",
        scientificName: "Cucumis sativus",
        description: "‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏¥‡∏ß‡∏ä‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πâ‡∏ô ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô-‡πÅ‡∏î‡∏î ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß",
        properties: ["‡∏ä‡∏∏‡πà‡∏°‡∏ä‡∏∑‡πâ‡∏ô", "‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß", "‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô"],
        usage: "‡∏™‡πÑ‡∏•‡∏î‡πå‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡πÅ‡∏ï‡∏∞‡∏ö‡∏ô‡∏ú‡∏¥‡∏ß ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤ ‡∏ö‡∏≠‡∏Å‡∏•‡∏¥‡πâ‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ",
        image: "/uploads/herbs/cucumber.jpg",
        addedBy: adminId
      }
    ];

    // ‡∏•‡∏ö herbs ‡πÄ‡∏Å‡πà‡∏≤
    await Herb.deleteMany({});
    console.log("üóëÔ∏è  Cleared old herbs");

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÉ‡∏´‡∏°‡πà
    const result = await Herb.insertMany(herbsData);
    console.log(`‚úÖ Added ${result.length} herbs to database`);

    result.forEach((herb, index) => {
      console.log(`${index + 1}. ${herb.name} (${herb.scientificName})`);
    });

    await mongoose.connection.close();
    console.log("\n‚úÖ Herb insertion complete");
    process.exit(0);

  } catch (error) {
    console.error("‚ùå Error:", error.message);
    process.exit(1);
  }
};

addHerbs();
