<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkinHerb Care - Admin Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Kanit', sans-serif; }
        .profile-drawer {
            position: fixed;
            top: 0;
            right: -320px;
            width: 320px;
            height: 100%;
            background: rgba(255,255,255,0.95);
            box-shadow: -8px 0 24px rgba(0,0,0,0.1);
            transition: right 0.25s ease;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(8px);
        }
        .profile-drawer.open { right: 0; }
        .profile-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.2);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            z-index: 900;
        }
        .profile-backdrop.show { opacity: 1; pointer-events: auto; }
        .profile-drawer-avatar {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #a7f3d0;
            background: #ecfdf5;
        }
        .profile-drawer-btn {
            width: 100%;
            border: none;
            border-radius: 10px;
            padding: 10px 12px;
            font-weight: 600;
            cursor: pointer;
        }
        .profile-drawer-btn.primary { background: #34d399; color: #064e3b; }
        .profile-drawer-btn.ghost { background: #e5e7eb; color: #374151; }
    </style>
</head>
<body class="bg-[#F4F7FE] text-gray-800 flex h-screen overflow-hidden">

    <aside class="w-64 bg-[#111C44] text-white flex flex-col flex-shrink-0 transition-all duration-300 shadow-xl z-20">
        
        <div class="p-6 flex items-center justify-center border-b border-gray-700/30">
            <div class="text-xl font-bold tracking-wide flex items-center gap-2">
                <i class="fa-solid fa-leaf text-green-400"></i> SKINHERB<span class="font-light">CARE</span>
            </div>
        </div>

        <div class="flex flex-col items-center mt-8 mb-6">
            <button id="profile-btn-admin" class="relative group cursor-pointer">
                <div class="w-20 h-20 rounded-full border-2 border-yellow-400 p-1 overflow-hidden bg-white/10">
                    <img id="profile-sidebar-img" src="" alt="Admin" class="w-full h-full object-cover" style="display:none;">
                    <div id="profile-sidebar-fallback" class="w-full h-full flex items-center justify-center text-3xl">üë§</div>
                </div>
            </button>
            <h3 id="profile-sidebar-name" class="mt-3 text-lg font-medium">User</h3>
            <p class="text-xs text-gray-400 bg-white/10 px-2 py-0.5 rounded-full mt-1">Admin</p>
        </div>

        <nav class="flex-1 px-4 space-y-3 overflow-y-auto">
            <div class="text-[10px] text-gray-400 uppercase font-semibold pl-3 mb-2 tracking-wider">FEATURES</div>
            
            <a href="#" class="flex items-center gap-3 px-4 py-3 bg-[#FFC107] text-[#111C44] rounded-xl font-bold shadow-md transition-all">
                <i class="fa-solid fa-table-columns w-5 text-center"></i>
                <span>Dashboard</span>
            </a>

            <a href="herb_list.html" class="flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-xl transition-all">
                <i class="fa-solid fa-leaf w-5 text-center text-green-400"></i>
                <span>‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£</span>
            </a>

            <a href="disease_list.html" class="flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-xl transition-all">
                <i class="fa-solid fa-virus w-5 text-center text-cyan-400"></i>
                <span>‡πÇ‡∏£‡∏Ñ‡∏ú‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á</span>
            </a>
            
            </nav>

        <div class="p-4 mt-auto space-y-3 bg-[#0d1636]">
            
            <a href="index.html" onclick="localStorage.setItem('userRole', 'admin')" target="_blank" class="w-full bg-[#1A2B5F] hover:bg-[#233a7d] text-white py-3 rounded-xl flex items-center justify-center gap-2 transition-all border border-gray-600/50 shadow-sm">
                <i class="fa-solid fa-globe"></i>
                <span>‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</span>
            </a>

            <a href="index.html" onclick="localStorage.removeItem('userRole')" class="w-full bg-[#FF0000] hover:bg-red-700 text-white py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg">
                <i class="fa-solid fa-power-off"></i>
                <span>Log Out</span>
            </a>

        </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen overflow-y-auto">
        <header class="flex justify-between items-center p-6 bg-white/50 backdrop-blur-sm sticky top-0 z-10">
            <div>
                <div class="text-sm text-gray-500">Pages / Dashboard</div>
                <h1 class="text-2xl font-bold text-[#111C44]">Dashboard</h1>
            </div>
            
            <div class="hidden md:flex items-center gap-3">
                 <div class="flex items-center bg-white rounded-full px-4 py-2 shadow-sm border border-gray-200 w-64">
                    <div class="bg-[#111C44] text-white text-xs px-2 py-1 rounded mr-2">All Candidates</div>
                    <input type="text" placeholder="Search..." class="bg-transparent border-none outline-none text-sm w-full text-gray-600">
                    <i class="fa-solid fa-magnifying-glass text-gray-400 ml-2"></i>
                </div>
            </div>
        </header>

        <div class="px-6 pb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6 mb-8">
                <div class="lg:col-span-5 bg-[#4ADE80] rounded-2xl p-6 text-white shadow-lg relative overflow-hidden h-48 flex flex-col items-center justify-center text-center">
                    <div class="absolute top-2 right-2 opacity-30"><i class="fa-solid fa-leaf text-8xl"></i></div>
                    <h3 class="text-xl font-bold relative z-10">‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <div class="text-7xl font-bold my-1 relative z-10">12</div>
                    <p class="text-sm font-medium opacity-90 relative z-10">‡∏ä‡∏ô‡∏¥‡∏î</p>
                </div>

                <div class="lg:col-span-7 bg-[#111C44] rounded-2xl p-8 relative overflow-hidden text-white flex flex-col justify-center shadow-lg h-48">
                     <div class="absolute top-0 right-10 w-40 h-full border-l border-white/10 transform rotate-12"></div>
                     <div class="absolute top-0 right-20 w-40 h-full border-l border-white/10 transform rotate-12"></div>
                    <h2 class="text-3xl font-bold">Work Life <br> <span class="text-[#FFC107]">Balance</span></h2>
                    <p class="text-xs text-gray-400 mt-2 max-w-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                    <div class="mt-4"><i class="fa-regular fa-paper-plane text-2xl text-gray-500"></i></div>
                </div>

                 <div class="lg:col-span-5 bg-[#06b6d4] rounded-2xl p-6 text-white shadow-lg relative overflow-hidden h-48 flex flex-col items-center justify-center text-center mt-[-1rem] md:mt-0">
                    <div class="absolute top-2 right-2 opacity-30"><i class="fa-solid fa-virus text-8xl"></i></div>
                    <h3 class="text-xl font-bold relative z-10">‡πÇ‡∏£‡∏Ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <div class="text-7xl font-bold my-1 relative z-10">10</div>
                    <p class="text-sm font-medium opacity-90 relative z-10">‡∏ä‡∏ô‡∏¥‡∏î</p>
                </div>
            </div>

            <div class="bg-white rounded-3xl p-6 shadow-sm border border-gray-100">
                <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                    <h2 class="text-xl font-bold text-[#111C44]">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏£‡∏Ñ (Disease Management)</h2>
                    
                    <a href="disease_list.html" class="bg-[#111C44] hover:bg-[#233a7d] text-white px-5 py-2 rounded-lg flex items-center gap-2 shadow-md transition-all text-sm font-medium">
                        <i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏£‡∏Ñ‡πÉ‡∏´‡∏°‡πà
                    </a>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="bg-gray-50 text-[#111C44] text-xs uppercase font-bold">
                                <th class="p-4 border-b rounded-tl-lg">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                                <th class="p-4 border-b">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏Ñ</th>
                                <th class="p-4 border-b">‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</th>
                                <th class="p-4 border-b">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</th>
                                <th class="p-4 border-b text-center rounded-tr-lg">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody class="text-sm text-gray-600">
                            <tr class="hover:bg-blue-50/30 transition-colors border-b last:border-none">
                                <td class="p-4">
                                    <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600">
                                        <i class="fa-solid fa-disease"></i>
                                    </div>
                                </td>
                                <td class="p-4 font-bold text-[#111C44]">‡πÇ‡∏£‡∏Ñ‡∏Å‡∏•‡∏≤‡∏Å (Ringworm)</td>
                                <td class="p-4"><span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold">‡∏ä‡∏∏‡∏°‡πÄ‡∏´‡πá‡∏î‡πÄ‡∏ó‡∏®</span></td>
                                <td class="p-4">17 ‡∏°.‡∏Ñ. 2026</td>
                                <td class="p-4 text-center space-x-2">
                                    <button class="text-amber-500 hover:text-amber-600"><i class="fa-solid fa-pen-to-square"></i></button>
                                    <button class="text-red-500 hover:text-red-600"><i class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <div id="profile-backdrop" class="profile-backdrop"></div>
    <aside id="profile-drawer" class="profile-drawer" aria-hidden="true">
        <div class="flex items-center justify-between mb-4">
            <h3 class="font-bold text-[#0f3d2e]">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
            <button id="profile-close" class="profile-drawer-btn ghost" style="width:auto;padding:6px 10px;">‡∏õ‡∏¥‡∏î</button>
        </div>
        <div class="flex flex-col items-start gap-2">
            <img id="profile-drawer-img" class="profile-drawer-avatar" src="" alt="Profile" style="display:none;">
            <div id="profile-drawer-fallback" class="profile-drawer-avatar flex items-center justify-center text-2xl text-green-500">üë§</div>
            <div id="profile-drawer-name" class="font-bold text-[#0f3d2e]">User</div>
            <div id="profile-drawer-email" class="text-sm text-gray-500">-</div>
        </div>
        <div class="mt-4 grid gap-2">
            <label class="profile-drawer-btn ghost text-center" for="profile-image-input">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</label>
            <input id="profile-image-input" type="file" accept="image/*" style="display:none;">
            <button id="profile-logout" class="profile-drawer-btn primary">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </aside>

    <script>
        (function setupProfilePanel() {
            const token = localStorage.getItem('token');
            const userRaw = localStorage.getItem('user');
            const user = userRaw ? JSON.parse(userRaw) : null;

            const btn = document.getElementById('profile-btn-admin');
            const drawer = document.getElementById('profile-drawer');
            const backdrop = document.getElementById('profile-backdrop');
            const closeBtn = document.getElementById('profile-close');
            const logoutBtn = document.getElementById('profile-logout');
            const nameSidebar = document.getElementById('profile-sidebar-name');
            const nameDrawer = document.getElementById('profile-drawer-name');
            const emailDrawer = document.getElementById('profile-drawer-email');
            const imgSidebar = document.getElementById('profile-sidebar-img');
            const fallbackSidebar = document.getElementById('profile-sidebar-fallback');
            const imgDrawer = document.getElementById('profile-drawer-img');
            const fallbackDrawer = document.getElementById('profile-drawer-fallback');
            const imageInput = document.getElementById('profile-image-input');

            const fullName = user
                ? [user.firstName, user.lastName].filter(Boolean).join(' ') || user.name || user.username || 'User'
                : 'User';
            const email = user && user.email ? user.email : '-';
            if (nameSidebar) nameSidebar.textContent = fullName;
            if (nameDrawer) nameDrawer.textContent = fullName;
            if (emailDrawer) emailDrawer.textContent = email;

            const applyImage = (src) => {
                if (src) {
                    imgSidebar.src = src;
                    imgSidebar.style.display = 'block';
                    fallbackSidebar.style.display = 'none';
                    imgDrawer.src = src;
                    imgDrawer.style.display = 'block';
                    fallbackDrawer.style.display = 'none';
                } else {
                    imgSidebar.style.display = 'none';
                    fallbackSidebar.style.display = 'flex';
                    imgDrawer.style.display = 'none';
                    fallbackDrawer.style.display = 'flex';
                }
            };
            applyImage(localStorage.getItem('profileImage'));

            const openDrawer = () => {
                if (!token) { window.location.href = '/login.html'; return; }
                drawer.classList.add('open');
                backdrop.classList.add('show');
                drawer.setAttribute('aria-hidden', 'false');
            };
            const closeDrawer = () => {
                drawer.classList.remove('open');
                backdrop.classList.remove('show');
                drawer.setAttribute('aria-hidden', 'true');
            };

            if (btn) btn.addEventListener('click', openDrawer);
            if (closeBtn) closeBtn.addEventListener('click', closeDrawer);
            if (backdrop) backdrop.addEventListener('click', closeDrawer);
            if (logoutBtn) logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                localStorage.removeItem('userRole');
                localStorage.removeItem('profileImage');
                window.location.href = '/login.html';
            });
            if (imageInput) {
                imageInput.addEventListener('change', () => {
                    const file = imageInput.files && imageInput.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const src = e.target.result;
                        localStorage.setItem('profileImage', src);
                        applyImage(src);
                    };
                    reader.readAsDataURL(file);
                });
            }
        })();
    </script>
</body>
</html>
